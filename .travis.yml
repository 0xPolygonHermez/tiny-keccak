sudo: false
language: rust
branches:
  only:
  - master
matrix:
  fast_finish: false
  include:
  - rust: stable
  - rust: beta
  - rust: nightly
after_success: |
  [ $TRAVIS_BRANCH = master ] &&
  [ $TRAVIS_PULL_REQUEST = false ] &&
  [ $TRAVIS_RUST_VERSION = stable ] &&
  cargo doc --no-deps --verbose &&
  echo '<meta http-equiv=refresh content=0;url=tiny_keccak/index.html>' > target/doc/index.html &&
  pip install --user ghp-import &&
  /home/travis/.local/bin/ghp-import -n target/doc &&
  git push -fq https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git gh-pages
env:
  global:
  - secure: RgbiI9zsIwMZcvQe4/4VgDnmrzaUwbTn0gAxlM1FUfNrgIr0P1C26GlRsKNafnA+arp4eBvjiX4q2LAQ61sYGEvMSvU5VpQe4CW3kR6Ol2wAnEpS7zVwY4SbtONdWZNM4ZeMZ7WQjNUExU1V1RYg5igNIlo4YFzu6FN4D6NpX6lsLtdpNOIPfbT3ivnUTtaVOmUU3nxpTKd/OUmqC91fYMAT7rgXoe00Ae7IhCxrSjtyu5Y4/m+ZATHCTECc+8/tcNsSOvAq+SAd98ZoiJlvR8pabzJ81/vkHdNHf9DGOvtGYFu3T8Dn0baQHg7dks3rJEsciAa2ik995sRG1NinzS/Tvbbc/hmMGA4f4MSAyaaxiyY7XMaYALGuJOKGtp2bmxorKvBpK1CiOIcb9G7drGxbtRMZnE4mb/RJHpsD1KI+R3mzYhMX4h5yvZguhwnf7rrfM9/QdcToOK9iZf95LMu/qjI0E8VoxZzxOHfXJ5RhTxZKviZ/XWr8GwuoP20N5HveeoGAJLrurzE9KID+9DptB+QytVAaRqsJORg8LzlUNZpSD3qTZerbZFIwWKdRSM1Qn6IK29bCSqzR0T3sZAzZGQIf1f3QY+bWuAjWeiM+a+UyOm0vCMPHqeudb8I3eOufXFy0jyJzvqe0DVo 
